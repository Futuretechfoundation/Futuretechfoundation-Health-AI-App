<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FutureTech Health App</title>
  <link rel="manifest" href="manifest.json">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: #f4f4f4;
    }

    #chatbot-container {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    #afiba-avatar {
      width: 400px;
      height: 400px;
      background-color: #ccc;
      object-fit: contain;
    }

    #data-entry {
      margin-top: 20px;
    }

    input {
      margin: 5px;
      padding: 10px;
    }

    button {
      padding: 10px;
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
    }

    button:hover {
      background-color: #45a049;
    }
  </style>
</head>
<body>
  <div id="chatbot-container">
    <!-- Replace the canvas with an image tag -->
    <img id="afiba-avatar" src="assets/afiba-avatar.png" alt="Afiba Avatar">

    <div id="data-entry">
      <label for="food">Food:</label>
      <input type="text" id="food" placeholder="Enter food">
      <label for="supplements">Supplements:</label>
      <input type="text" id="supplements" placeholder="Enter supplements">
      <label for="sleep">Sleep (hrs):</label>
      <input type="number" id="sleep" placeholder="Enter hours of sleep">
      <label for="exercise">Exercise (mins):</label>
      <input type="number" id="exercise" placeholder="Enter minutes of exercise">
      <button onclick="saveData()">Save Data</button>
    </div>
  </div>

  <script>
    // JavaScript for Health App
    let userData = {
      food: "",
      supplements: "",
      sleep: 0,
      exercise: 0
    };

    // Save data locally in the browser
    function saveData() {
      userData.food = document.getElementById('food').value;
      userData.supplements = document.getElementById('supplements').value;
      userData.sleep = parseInt(document.getElementById('sleep').value);
      userData.exercise = parseInt(document.getElementById('exercise').value);

      localStorage.setItem('userData', JSON.stringify(userData));
      analyzeData(userData);
    }

    // Analyze the data through Afiba's avatar
    function analyzeData(data) {
      const analysis = `Food: ${data.food}, Supplements: ${data.supplements}, Sleep: ${data.sleep} hours, Exercise: ${data.exercise} minutes.`;
      alert(`Afiba is analyzing: ${analysis}`);
      // Logic for analysis (this can be expanded later)
    }

    // Initialize app
    window.onload = function() {
      const savedData = JSON.parse(localStorage.getItem('userData'));
      if (savedData) {
        userData = savedData;
      }
    };
  </script>

  <script>
    // Service Worker for PWA functionality
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/service-worker.js').then((registration) => {
        console.log('Service Worker registered with scope:', registration.scope);
      }).catch((error) => {
        console.log('Service Worker registration failed:', error);
      });
    }
  </script>
</body>
</html>

<!-- Manifest -->
<script type="application/json" id="manifest">
  {
    "name": "FutureTech Health App",
    "short_name": "Health App",
    "description": "Track and analyze health data with Afiba's chatbot.",
    "start_url": "/",
    "display": "standalone",
    "background_color": "#ffffff",
    "theme_color": "#4CAF50",
    "icons": [
      {
        "src": "/assets/icon.png",
        "sizes": "192x192",
        "type": "image/png"
      },
      {
        "src": "/assets/icon-512x512.png",
        "sizes": "512x512",
        "type": "image/png"
      }
    ]
  }
</script>

<!-- Service Worker -->
<script type="text/javascript" id="service-worker">
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
      console.log('Service Worker registered with scope: ', registration.scope);
    }).catch(function(error) {
      console.log('Service Worker registration failed: ', error);
    });
  }
</script>
